# Listen To Me - 听我指挥
# Changelog / 更新日志

## v1.1.1 (2025-11-23) - 错误修复 ??
### Bug修复 (Bug Fixes)
- ?? 修复 GameComponentDef 类型错误
- ?? 修复 ListenToMe_Marker ThingDef 配置错误
- ?? 移除不必要的 XML 定义
- ?? 清理 Defs/KeyBindings.xml
- ?? 清理 Patches/ListenToMeCore.xml

### 技术说明 (Technical Notes)
- Mod 通过 Harmony 补丁系统初始化，不需要 GameComponentDef
- Mod 是纯功能性的，不需要自定义 ThingDef
- 所有功能通过 [StaticConstructorOnStartup] 和 Harmony 实现

### 影响 (Impact)
- ? 游戏启动时不再显示错误
- ? 功能完全正常
- ? 无需重新配置
- ? 自动更新（符号链接模式）

---

## v1.1.0 (2025-11-23) - 自然语法更新 ?
### 新增功能 (New Features)
- ? 自然语法指令系统: [动词] + [位置] + [动作] + [对象]
- ? 移动动词识别: 去/来/到/前往/走到/移动到/过去
- ? 位置智能识别: 厨房/仓库/医疗室/工作台等 9+ 种位置
- ? 动作自动提取: 做/干/制作/建造/搬运等 12+ 种动作
- ? 对象关键词识别: 敌人/伤员/动物/植物等
- ? 组合指令支持: "去厨房做饭"、"到仓库拿木材"
- ? 工作台精确指定: "在裁缝台制作防尘大衣"
- ? 数量识别增强: 支持阿拉伯数字和中文数字
- ?? 新增 COMMAND_FORMAT.md 详细指令格式文档
- ?? 新增 RELEASE_v1.1.0.md 版本更新说明

### 改进优化 (Improvements)
- ?? 重构 CommandParser.cs (480 行)
- ?? 优化位置查找算法，支持房间角色和建筑名称
- ?? 改进动作提取逻辑，支持动词+名词组合
- ?? 增强关键词匹配，支持更多表达方式
- ?? 优化目标对象查找，距离优先排序
- ?? 更新 README.md 增加详细示例和使用技巧
- ?? 完善所有文档的格式和内容

### Bug修复 (Bug Fixes)
- ?? 修复某些情况下目标识别失败的问题
- ?? 改进工作台匹配算法
- ?? 优化数量提取逻辑
- ?? 修复位置查找的边界情况

### 技术更新 (Technical)
- ?? DLL 大小: 50 KB (+5 KB)
- ?? 代码行数: ~2000 行 (+60 行)
- ? 解析速度: < 1ms (无变化)
- ?? 内存占用: < 1 MB (无变化)

### 指令示例对比 (Examples)
旧版 (v1.0.0):
  制作防尘大衣        → 需要手动选择工作台
  攻击                → 只能攻击，不能移动
  
新版 (v1.1.0):
  去厨房做饭          → 自动移动+开始工作 ?
  到仓库拿木材        → 移动到位置+搬运 ?
  前往医疗室治疗伤员   → 动+执行任务 ?
  在裁缝台制作3个防尘大衣 → 精确控制 ?

### 兼容性 (Compatibility)
- ? 向后兼容 v1.0.0 的所有指令
- ? 支持中英文混用
- ? 保持性能优化
- ? 无破坏性更改

---

## v1.0.0 (2025-11-23) - 首次发布 ??
### 核心功能 (Core Features)
- ? 文本指令解析系统
- ? 关键词匹配引擎
- ? AI智能分析
- ? RimTalk 对话系统
- ? 16+ 种活动类型支持
- ? 工作台任务识别
- ? 数量识别 (1-10)
- ? 中英文双语支持

### 支持的活动 (Activities)
- 移动 (Move)
- 工作 (Work)
- 战斗 (Fight)
- 等待 (Wait)
- 制作 (Craft)
- 建造 (Construct)
- 搬运 (Haul)
- 狩猎 (Hunt)
- 采集 (Gather)
- 挖矿 (Mine)
- 医疗 (Tend)
- 清洁 (Clean)
- 修理 (Repair)

### UI功能 (UI Features)
- ?? Dialog_TextCommand - 指令输入窗口
- ?? Command_TextInput - Gizmo按钮
- ?? 快捷键支持 (L键)
- ?? 对话气泡显示

### 技术实现 (Technical)
- ?? Harmony 补丁系统
- ?? 智能指令解析
- ?? 目标自动查找
- ?? 调试工具完整
- ?? 完整中英文本地化

### 文档 (Documentation)
- ?? README.md - 使用说明
- ?? BUILD.md - 编译指南
- ?? API.md - 开发者文档
- ?? QUICKSTART.md - 快速入门
- ?? CONTRIBUTING.md - 贡献指南
- ?? LICENSE - MIT 许可证

### 性能指标 (Performance)
- DLL大小: 45 KB
- 代码行数: ~1940 行
- 解析速度: < 1ms
- 内存占用: < 1 MB
- 更新频率: 10 tick

---

## 计划更新 (Planned Updates)

### v1.2 (计划中 / Planned)
- [ ] 指令历史记录
- [ ] 批量指令支持
- [ ] 改进英文支持
- [ ] 添加更多预设位置
- [ ] 优化对话内容
- [ ] 性能优化

### v1.3 (规划中 / Roadmap)
- [ ] 连续指令队列
- [ ] 条件指令 (如果...就...)
- [ ] 多小人协同指令
- [ ] 自定义关键词系统
- [ ] 指令宏功能

### v2.0 (长期目标 / Long-term)
- [ ] AI自然语言理解
- [ ] 学习玩家习惯
- [ ] 智能任务规划
- [ ] 多语言完整支持
- [ ] 语音指令支持

---

## 已知问题 (Known Issues)

### v1.1.1
- 无已知问题

### v1.1.0
1. 英文指令支持有限 (主要优化中文)
2. 复杂房间识别可能失败 (使用建筑名称代替)
3. 部分 Mod 物品可能无法识别 (使用更具体描述)

### 解决方案 (Workarounds)
- 使用中文指令获得最佳体验
- 指定具体的建筑名称而非房间类型
- 对于 Mod 物品使用游戏内显示的名称

---

## 反馈 (Feedback)

### 报告问题 (Report Issues)
- GitHub Issues: [链接]
- Steam Workshop: [链接]
- Discord: [链接]

### 建议功能 (Suggest Features)
欢迎在 GitHub 上提交功能请求！

---

## 致谢 (Credits)

- Ludeon Studios - RimWorld
- RimWorld 社区
- Harmony 项目
- 所有测试人员和贡献者

---

**最后更新**: 2025-11-23  
**当前版本**: v1.1.1  
**状态**: ? 稳定版

---

# 查看完整更新详情
- BUGFIX_v1.1.1.md - v1.1.1 错误修复说明
- RELEASE_v1.1.0.md - v1.1.0 详细更新说明
- COMMAND_FORMAT.md - 指令格式文档
- README.md - 完整使用手册
