# Listen To Me - 听我指挥

一个革命性的 RimWorld Mod，让你可以用**自然的中文语句**直接指挥小人！

**版本**: 1.1.0  
**RimWorld 版本**: 1.5  
**语言**: 简体中文 / English

---

## ? 特色功能

### ??? 自然语法指令系统
使用符合中文习惯的指令格式：**[动词] + [位置] + [动作] + [对象]**

```
去厨房做饭          ? 自动移动到厨房并开始烹饪
到仓库拿木材        ? 移动到仓库搬运物资
前往医疗室治疗伤员   ? 移动并执行医疗任务
在裁缝台制作3个防尘大衣 ? 指定工作台、物品和数量
```

**不再需要复杂的菜单操作，说人话就能控制小人！**

### ?? RimTalk 对话系统
小人会根据自己的心情和特质给出个性化回应：
- 心情好: "好的，我这就去！" ??
- 心情差: "唉，又要干活了..." ??
- 特殊情况: "那里有点远啊..." ??

回应示例:
```
你: "去厨房做饭"
小人: "好的，我这就去！"（走向厨房开始烹饪）
```

### ?? 智能识别引擎
- **双模式解析**: 关键词匹配 + AI智能分析
- **自动目标查找**: 说"攻击"就找最近的敌人
- **工作台识别**: 自动识别"裁缝台制作防尘大衣"
- **数量支持**: "做3个"、"造五件"都能理解
- **模糊匹配**: 说法不标准也能懂

### ?? 16+ 种活动支持
移动、工作、战斗、制作、建造、搬运、狩猎、采集、挖矿、医疗、清洁、修理...

---

## ?? 快速开始

### 安装
1. 下载 Mod 文件
2. 解压到 `RimWorld/Mods/` 文件夹
3. 在游戏中启用 "Listen To Me - 听我指挥"
4. 重启游戏

### 第一次使用
1. 进入游戏并选中任意小人
2. 点击下方的 **"文本指令"** 按钮（或按 `L` 键）
3. 输入指令，例如: `去厨房做饭`
4. 点击 **"执行指令"**
5. 观察小人的反应和行动！

---

## ?? 指令格式

### 基本格式
```
[移动动词] + [位置] + [动作] + [对象]
```

### 指令示例

#### ?? 移动类
```
去厨房              → 移动到厨房
到仓库              → 移动到仓库
前往医疗室          → 移动到医疗室
```

#### ?? 工作类
```
去厨房做饭          → 移动到厨房并开始烹饪
在裁缝台工作        → 在裁缝台上工作
到工作间干活        → 移动到工作间
```

#### ?? 战斗类
```
攻击敌人            → 攻击最近的敌对单位
消灭入侵者          → 消灭敌人
去外面打猎          → 移动到室外并狩猎
```

#### ?? 制作类
```
制作防尘大衣        → 在附近裁缝台制作
在裁缝台做3个防尘大衣 → 指定工作台和数量
做武器              → 制作武器
生产药品            → 生产医疗用品
```

#### ??? 建造类
```
建造墙壁            → 建造最近的框架
修建房屋            → 执行建造任务
```

#### ?? 搬运类
```
搬运物资            → 搬运最近的物品
去仓库拿木材        → 移动并搬运
运送材料            → 搬运材料
```

#### ?? 狩猎采集类
```
狩猎                → 狩猎最近的动物
去外面打猎          → 移动到室外并狩猎
采集植物            → 采集可收获的植物
```

#### ?? 挖矿类
```
挖矿                → 挖掘最近的矿石
开采石头            → 开采矿石
```

#### ?? 医疗类
```
治疗伤员            → 治疗受伤的小人
到医疗室照顾病人    → 移动并执行医疗
医治                → 治疗附近伤员
```

#### ?? 清洁修理类
```
清洁                → 清洁附近区域
打扫房间            → 清洁房间
修理设备            → 修理损坏的物品
```

#### ?? 其他类
```
等待                → 原地待命
休息                → 停止当前工作
```

---

## ?? 高级功能

### 省略关键词
系统智能理解，可以省略部分词语：
```
厨房做饭            ? (省略"去")
裁缝台制作衣服      ? (省略"去")
攻击                ? (自动查找敌人)
```

### 多种表达方式
同一意思，多种说法：
```
去厨房做饭 = 到厨房干活 = 前往厨房工作
制作衣服 = 做衣服 = 生产衣服
攻击敌人 = 打敌人 = 消灭入侵者
```

### 数量识别
```
制作3个木墙             ? 阿拉伯数字
做五件衣服              ? 中文数字
生产10个药品            ? 大数量
```

### 对话模式
勾选"使用对话模式"后：
1. 小人先回应指令（带气泡）
2. 等待几秒钟
3. 开始执行动作

更有代入感！

---

## ?? 技术特性

### 编译信息
- **目标框架**: .NET Framework 4.7.2
- **编译工具**: .NET SDK 9.0
- **代码量**: 约 2000+ 行
- **DLL 大小**: 50 KB

### 核心组件
| 组件 | 功能 | 行数 |
|------|------|------|
| CommandParser | 指令解析引擎 | ~480 行 |
| CommandExecutor | 指令执行系统 | ~580 行 |
| DialogueSystem | 对话系统 | ~200 行 |
| Dialog_TextCommand | UI界面 | ~140 行 |
| AdvancedCommandParser | 高级解析 | ~280 行 |
| DebugTools | 调试工具 | ~260 行 |

### 性能数据
- **解析速度**: < 1ms
- **内存占用**: < 1 MB
- **性能影响**: 可忽略不计
- **更新频率**: 每 10 tick

---

## ?? 完整文档

- **[QUICKSTART.md](QUICKSTART.md)** - 快速入门指南
- **[COMMAND_FORMAT.md](COMMAND_FORMAT.md)** - 详细指令格式说明 ? 新增
- **[BUILD.md](BUILD.md)** - 编译和开发指南
- **[API.md](API.md)** - 开发者 API 文档
- **[CONTRIBUTING.md](CONTRIBUTING.md)** - 贡献指南

---

## ?? 故障排除

### Mod 没有显示？
1. 确认文件夹在 `RimWorld/Mods/` 下
2. 检查 `About/About.xml` 是否存在
3. 确认游戏版本是 1.5

### 按钮没有出现？
1. 确认 mod 已启用
2. 重启游戏
3. 查看日志是否有错误

### 指令无法执行？
1. 确认小人状态正常（未倒下/死亡）
2. 尝试简单指令如"等待"
3. 启用调试模式查看日志

### 启用调试模式
在开发者控制台输入:
```csharp
ListenToMe.DebugTools.DebugMode = true
```

### 查看日志
日志位置: 
```
%USERPROFILE%\AppData\LocalLow\Ludeon Studios\RimWorld by Ludeon Studios\Player.log
```
搜索 `[ListenToMe]`

---

## ?? 使用技巧

### 1. 组合指令
```
去厨房做饭          → 移动 + 工作
到外面打猎          → 移动 + 狩猎
前往医疗室治疗伤员   → 移动 + 医疗
```

### 2. 快捷指令
```
攻击    → 自动查找并攻击敌人
治疗    → 自动查找并治疗伤员
狩猎    → 自动查找并狩猎动物
清洁    → 自动查找并清洁污渍
```

### 3. 工作台指定
```
裁缝台制作防尘大衣      → 明确指定工作台
在锻造台做长剑          → 在特定工作台工作
炉灶做饭                → 使用炉灶烹饪
```

### 4. 数量控制
```
制作3个木墙             → 精确数量
做五件衣服              → 中文数字
生产10个药品            → 批量生产
```

---

## ?? 示例场景

### 场景1: 战斗来袭
```
你: "攻击敌人！"
小人: "遵命！"（拿起武器冲向敌人）
```

### 场景2: 准备晚餐
```
你: "去厨房做饭"
小人: "好的，我这就去！"（走向厨房开始烹饪）
```

### 场景3: 制作装备
```
你: "在裁缝台制作3个防尘大衣"
小人: "没问题，交给我吧！"（前往裁缝台开始制作）
```

### 场景4: 救治伤员
```
你: "到医疗室治疗伤员"
小人: "我马上去！"（赶往医疗室救人）
```

---

## ?? 未来计划

### v1.2 (计划中)
- [ ] 支持更多复杂指令
- [ ] 添加指令历史记录
- [ ] 支持批量指令
- [ ] 改进对话内容

### v1.3 (规划中)
- [ ] 语音指令支持
- [ ] 多小人协同指令
- [ ] 自定义关键词
- [ ] 指令宏功能

### v2.0 (长期目标)
- [ ] AI 自然语言理解
- [ ] 学习玩家习惯
- [ ] 智能任务规划
- [ ] 多语言完整支持

---

## ?? 贡献

欢迎提交 Issue 和 Pull Request！

查看 [CONTRIBUTING.md](CONTRIBUTING.md) 了解详情。

---

## ?? 许可证

MIT License - 开源免费使用

---

## ?? 致谢

- **Ludeon Studios** - 创造了 RimWorld
- **RimWorld 社区** - 提供灵感和支持
- **Harmony 项目** - 提供补丁框架
- **所有测试者和贡献者**

---

## ?? 联系方式

- **GitHub Issues**: [报告问题](https://github.com/your-repo/issues)
- **Steam Workshop**: [工坊页面](https://steamcommunity.com/)
- **Discord**: [加入讨论](https://discord.gg/)

---

## ?? 更新日志

### v1.1.0 (2025-11-23) - 自然语法更新
- ? **新增**: 自然语法指令支持（动词+位置+动作+对象）
- ? **新增**: 详细的指令格式文档 (COMMAND_FORMAT.md)
- ?? **改进**: 优化位置识别算法
- ?? **改进**: 增强动作提取逻辑
- ?? **改进**: 更好的关键词匹配
- ?? **文档**: 完善使用说明和示例

### v1.0.0 (2025-11-23) - 首次发布
- ? 基本文本指令解析
- ? RimTalk 对话系统
- ? 16+ 种活动类型支持
- ? 工作台任务识别
- ? 完整的中英文支持

---

**享受游戏，用嘴指挥小人！** ???

*最后更新: 2025-11-23*
