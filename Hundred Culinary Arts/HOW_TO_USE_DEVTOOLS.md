# ?? 测试工具使用指南

## ?? 测试工具在哪里？

测试工具是**代码方法**，需要通过RimWorld的**控制台**调用。

---

## ?? 快速开始

### 第一步：开启开发模式
- 按 `F11` 键

### 第二步：打开控制台
- 按 `Ctrl + Shift + ~` 键（波浪号）

### 第三步：输入命令
复制粘贴以下命令：

```csharp
// 1. 生成极差武器
LivingWeapons.LivingWeapons_DevTools.SpawnAwfulWeapon();

// 2. 测试概率（100次）
LivingWeapons.LivingWeapons_DevTools.TestProbability();

// 3. 生成Lv.5觉醒武器
LivingWeapons.LivingWeapons_DevTools.SpawnAwakenedWeaponLv5();
```

---

## ?? 详细说明

### 1?? 生成极差武器

**命令**:
```csharp
LivingWeapons.LivingWeapons_DevTools.SpawnAwfulWeapon();
```

**功能**:
- 在地图中心生成一把随机的极差品质武器
- 有20%概率成为潜伏活体武器
- 会显示是否成功

**结果提示**:
- ? 成功：`生成潜伏活体武器: 极差 长剑`
- ? 失败：`普通极差武器: 极差 短刀 (未触发20%概率)`

---

### 2?? 测试概率（100次）

**命令**:
```csharp
LivingWeapons.LivingWeapons_DevTools.TestProbability();
```

**功能**:
- 自动生成100把极差武器
- 统计有多少成为活体武器
- 弹窗显示测试结果

**结果示例**:
```
【极差武器概率测试】
武器类型: 长剑
━━━━━━━━━━━━━━━━
总测试数: 100
活体武器: 21
━━━━━━━━━━━━━━━━
实际概率: 21.0%
预期概率: 20.0%
偏差: +1.0%
```

---

### 3?? 生成Lv.5觉醒武器

**命令**:
```csharp
LivingWeapons.LivingWeapons_DevTools.SpawnAwakenedWeaponLv5();
```

**功能**:
- 直接生成一把已觉醒的5级活体武器
- 跳过培养过程
- 用于测试高级功能

**结果**:
- 武器会出现在地图中心
- 查看详情可以看到等级和属性

---

## ?? 使用技巧

### 技巧1: 快速多次测试
在控制台中按 `↑` 键可以调出上一条命令，快速重复执行。

### 技巧2: 查看详细日志
按 `F12` 打开日志控制台，可以看到详细的调试信息。

### 技巧3: 找到生成的武器
所有武器都生成在**地图中心**：
- 按 `Home` 键快速回到中心
- 或按 `C` 键居中视角

---

## ?? 常见问题

### Q: 为什么控制台打不开？
**A**: 
- 确认已按 `F11` 开启Dev模式
- 组合键是 `Ctrl + Shift + ~`（不是单独的~）
- Mac用户可能需要使用 `Cmd + Shift + ~`

### Q: 输入命令后没反应？
**A**: 
- 确认命令末尾有分号 `;`
- 检查大小写是否正确
- 确认已进入游戏地图（不是世界地图）

### Q: 武器生成在哪里？
**A**: 
- 地图中心位置
- 按 `Home` 键回到中心
- 武器会显示在小人周围

### Q: 如何知道武器是否觉醒？
**A**: 
- 点击武器查看详细信息
- 潜伏状态会显示 "潜伏经验: X/100"
- 觉醒状态会显示 "等级: Lv.X"

---

## ?? 测试检查清单

完整测试流程：

- [ ] 1. 按F11开启Dev模式
- [ ] 2. 按Ctrl+Shift+~打开控制台
- [ ] 3. 运行 `SpawnAwfulWeapon()` 3-5次
- [ ] 4. 确认有武器成为活体武器
- [ ] 5. 运行 `TestProbability()` 查看概率
- [ ] 6. 确认概率在15-25%范围内
- [ ] 7. 运行 `SpawnAwakenedWeaponLv5()`
- [ ] 8. 查看武器详情确认有等级和属性

---

## ?? 故障排除

### 没有任何提示
- 检查是否在地图视图中（不是世界地图）
- 查看F12日志是否有错误信息

### 武器找不到
- 按Home键回到地图中心
- 检查地面是否有物品

### 概率测试显示0%
- 说明Harmony补丁可能没有成功应用
- 查看日志搜索 "Living Weapons"
- 重启游戏重新加载模组

---

## ?? 开始测试

现在您可以：

1. **启动RimWorld**
2. **加载或新建存档**
3. **按F11开启Dev模式**
4. **按Ctrl+Shift+~打开控制台**
5. **复制粘贴命令开始测试！**

??? **祝测试顺利！** ?
