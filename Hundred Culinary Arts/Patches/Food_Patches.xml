<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!-- 
    为所有继承自 MealCooked 的食物添加 CompProperties_NamedMeal 组件
    直接补丁抽象父类，这样所有子类都会继承这个组件
  -->
  
  <!-- 补丁 MealCooked 抽象类 (包含 MealSimple) -->
  <Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[@Name="MealCooked"]/comps</xpath>
    <match Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealCooked"]/comps</xpath>
      <value>
        <li Class="CulinaryArts.CompProperties_NamedMeal" />
      </value>
    </match>
    <nomatch Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealCooked"]</xpath>
      <value>
        <comps>
          <li Class="CulinaryArts.CompProperties_NamedMeal" />
        </comps>
      </value>
    </nomatch>
  </Operation>
  
  <!-- 补丁 MealFineBase 抽象类 (包含 MealFine, MealFine_Veg, MealFine_Meat) -->
  <Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[@Name="MealFineBase"]/comps</xpath>
    <match Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealFineBase"]/comps</xpath>
      <value>
        <li Class="CulinaryArts.CompProperties_NamedMeal" />
      </value>
    </match>
    <nomatch Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealFineBase"]</xpath>
      <value>
        <comps>
          <li Class="CulinaryArts.CompProperties_NamedMeal" />
        </comps>
      </value>
    </nomatch>
  </Operation>

  <!-- 补丁 MealLavishBase 抽象类 (包含 MealLavish, MealLavish_Veg, MealLavish_Meat) -->
  <Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[@Name="MealLavishBase"]/comps</xpath>
    <match Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealLavishBase"]/comps</xpath>
      <value>
        <li Class="CulinaryArts.CompProperties_NamedMeal" />
      </value>
    </match>
    <nomatch Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealLavishBase"]</xpath>
      <value>
        <comps>
          <li Class="CulinaryArts.CompProperties_NamedMeal" />
        </comps>
      </value>
    </nomatch>
  </Operation>
  
  <!-- 补丁 MealBase (包含 MealSurvivalPack, MealNutrientPaste) -->
  <Operation Class="PatchOperationConditional">
    <xpath>Defs/ThingDef[@Name="MealBase"]/comps</xpath>
    <match Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealBase"]/comps</xpath>
      <value>
        <li Class="CulinaryArts.CompProperties_NamedMeal" />
      </value>
    </match>
    <nomatch Class="PatchOperationAdd">
      <xpath>Defs/ThingDef[@Name="MealBase"]</xpath>
      <value>
        <comps>
          <li Class="CulinaryArts.CompProperties_NamedMeal" />
        </comps>
      </value>
    </nomatch>
  </Operation>
</Patch>