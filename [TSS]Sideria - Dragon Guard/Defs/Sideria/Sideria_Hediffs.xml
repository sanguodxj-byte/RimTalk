<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <!-- 希德莉亚 神躯 Hediff -->
  <HediffDef>
    <defName>TSS_Sideria_DivineBody</defName>
    <label>龙卫神躯</label>
    <description>希德莉亚降临时的神圣形态，拥有龙族的强大力量。\n\n神性躯体使其免疫火焰、毒素、温度等环境伤害，但仍可被武器和战斗伤害所伤。</description>
    <hediffClass>HediffWithComps</hediffClass>
    <isBad>false</isBad>
    <everCurableByItem>false</everCurableByItem>
    <initialSeverity>1.0</initialSeverity>
    <maxSeverity>1.0</maxSeverity>
    
    <!-- 神性躯体：免疫非战斗伤害 -->
    <modExtensions>
      <li Class="TheSecondSeat.DefModExtension_DivineBody">
        <!-- 允许穿透免疫的伤害类别（武器伤害类型） -->
        <allowedDamageCategories>
          <li>Sharp</li>
          <li>Blunt</li>
        </allowedDamageCategories>
        <!-- 来自武器的伤害可以穿透免疫 -->
        <allowWeaponDamage>true</allowWeaponDamage>
        <!-- 手术和处决伤害可以穿透免疫 -->
        <allowMedicalDamage>true</allowMedicalDamage>
        <!-- 来自 Pawn 的徒手攻击可以穿透免疫 -->
        <allowPawnInstigatorDamage>true</allowPawnInstigatorDamage>
      </li>
    </modExtensions>
    
    
    <stages>
      <li>
        <label>神躯</label>
        <!-- 无视疼痛 -->
        <painFactor>0</painFactor>
        <totalBleedFactor>0.5</totalBleedFactor>
        <statOffsets>
          <MoveSpeed>1.0</MoveSpeed>
          <MeleeHitChance>0.15</MeleeHitChance>
          <MeleeDodgeChance>0.15</MeleeDodgeChance>
        </statOffsets>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>0.15</offset>
          </li>
          <li>
            <capacity>Sight</capacity>
            <offset>0.25</offset>
          </li>
          <!-- 大幅提升 Moving 能力，使其几乎不受减速效果影响 -->
          <li>
            <capacity>Moving</capacity>
            <offset>5.0</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

</Defs>