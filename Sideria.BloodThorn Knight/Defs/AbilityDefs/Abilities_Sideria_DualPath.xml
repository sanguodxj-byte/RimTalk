<?xml version="1.0" encoding="utf-8"?>
<Defs>
	<!-- ========================================
		 龙魂路线技能（Dragon Soul Path Abilities）
		 
		 20%: 龙息（Dragon Breath）
		 40%: 龙之光环（Draconic Aura）
		 60%: 龙翼（Dragon Wings）
		 80%: 龙化（Draconic Transformation）
		 100%: 阿茨冈德升华（自动触发）
	========================================= -->

	<!-- 20% - 龙息 -->
	<AbilityDef ParentName="AbilityTouchBase">
		<defName>Sideria_DragonBreath</defName>
		<label>dragon breath</label>
		<description>Channel draconic power to unleash a cone of searing flames, burning all enemies in front of Sideria.\n\nRequires: Dragon Soul ≥ 20%\nCost: 25% Blood Essence\nCooldown: 30 seconds</description>
		<iconPath>UI/Abilities/DragonBreath</iconPath>
		<cooldownTicksRange>1800</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<ai_SearchAOEForTargets>true</ai_SearchAOEForTargets>
		<displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<jobDef>CastAbilityOnThingMelee</jobDef>
		<hostile>true</hostile>
		<casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>8</range>
			<warmupTime>1.0</warmupTime>
			<soundCast>Pawn_Melee_Punch_HitBuilding</soundCast>
			<targetParams>
				<canTargetLocations>true</canTargetLocations>
				<canTargetPawns>true</canTargetPawns>
				<canTargetBuildings>false</canTargetBuildings>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- 40% - 龙之光环 -->
	<AbilityDef>
		<defName>Sideria_DragonicAura</defName>
		<label>draconic aura</label>
		<description>Emanate an inspiring aura that boosts all nearby allies' combat effectiveness and morale.\n\nRequires: Dragon Soul ≥ 40%\nCost: 20% Blood Essence\nDuration: 30 seconds\nCooldown: 60 seconds\nEffect: +20% hit chance, +15% move speed, +5 mood for all allies within 15 tiles</description>
		<iconPath>UI/Abilities/DragonicAura</iconPath>
		<cooldownTicksRange>3600</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<hostile>false</hostile>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>0</range>
			<warmupTime>0.5</warmupTime>
			<targetParams>
				<canTargetSelf>true</canTargetSelf>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- 60% - 龙翼 -->
	<AbilityDef>
		<defName>Sideria_DragonWings</defName>
		<label>dragon wings</label>
		<description>Summon ethereal dragon wings to leap across the battlefield, landing with devastating impact.\n\nRequires: Dragon Soul ≥ 60%\nCost: 30% Blood Essence\nRange: 25 tiles\nCooldown: 45 seconds\nEffect: Instant teleport, stun enemies on landing</description>
		<iconPath>UI/Abilities/DragonWings</iconPath>
		<cooldownTicksRange>2700</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<hostile>false</hostile>
		<verbProperties>
			<verbClass>Verb_CastAbilityJump</verbClass>
			<range>25</range>
			<warmupTime>0.8</warmupTime>
			<requireLineOfSight>false</requireLineOfSight>
			<targetParams>
				<canTargetLocations>true</canTargetLocations>
				<canTargetPawns>false</canTargetPawns>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- 80% - 龙化 -->
	<AbilityDef>
		<defName>Sideria_DragonicTransformation</defName>
		<label>draconic transformation</label>
		<description>Temporarily assume a partial dragon form, gaining immense power and resilience.\n\nRequires: Dragon Soul ≥ 80%\nCost: 50% Blood Essence\nDuration: 45 seconds\nCooldown: 120 seconds\nEffect: +50% damage, +30% armor, +40% move speed, massive size increase</description>
		<iconPath>UI/Abilities/DragonicTransformation</iconPath>
		<cooldownTicksRange>7200</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<hostile>false</hostile>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>0</range>
			<warmupTime>1.5</warmupTime>
			<targetParams>
				<canTargetSelf>true</canTargetSelf>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- ========================================
		 血骸路线技能（Blood Curse Path Abilities）
		 
		 20%: 血液汲取（Blood Drain）
		 40%: 血族拥抱（Vampiric Embrace）
		 60%: 血之狂怒（Blood Frenzy）
		 80%: 弃誓者转化（Oathbreaker Transformation）
		 100%: 击杀恢复血原质（被动，自动）
	========================================= -->

	<!-- 20% - 血液汲取 -->
	<AbilityDef ParentName="AbilityTouchBase">
		<defName>Sideria_BloodDrain</defName>
		<label>blood drain</label>
		<description>Drain the life force from a target, dealing damage and restoring blood essence.\n\nRequires: Blood Curse ≥ 20%\nCost: 10% Blood Essence\nCooldown: 20 seconds\nEffect: Deal 30 damage, restore 25% blood essence from kills</description>
		<iconPath>UI/Abilities/BloodDrain</iconPath>
		<cooldownTicksRange>1200</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<jobDef>CastAbilityOnThingMelee</jobDef>
		<hostile>true</hostile>
		<casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>3</range>
			<warmupTime>0.5</warmupTime>
			<targetParams>
				<canTargetPawns>true</canTargetPawns>
				<canTargetSelf>false</canTargetSelf>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- 40% - 血族拥抱 -->
	<AbilityDef ParentName="AbilityTouchBase">
		<defName>Sideria_VampiricEmbrace</defName>
		<label>vampiric embrace</label>
		<description>Curse a target with vampiric affliction, draining their health over time and empowering yourself.\n\nRequires: Blood Curse ≥ 40%\nCost: 20% Blood Essence\nCooldown: 40 seconds\nEffect: Drain 10 HP/sec for 10 seconds, restore blood essence equal to damage dealt</description>
		<iconPath>UI/Abilities/VampiricEmbrace</iconPath>
		<cooldownTicksRange>2400</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<jobDef>CastAbilityOnThingMelee</jobDef>
		<hostile>true</hostile>
		<casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>5</range>
			<warmupTime>0.8</warmupTime>
			<targetParams>
				<canTargetPawns>true</canTargetPawns>
				<canTargetSelf>false</canTargetSelf>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- 60% - 血之狂怒 -->
	<AbilityDef>
		<defName>Sideria_BloodFrenzy</defName>
		<label>blood frenzy</label>
		<description>Enter a berserker state, attacking with reckless abandon at tremendous speed.\n\nRequires: Blood Curse ≥ 60%\nCost: 35% Blood Essence\nDuration: 20 seconds\nCooldown: 60 seconds\nEffect: +100% attack speed, +30% damage, -20% accuracy, lifesteal on hits</description>
		<iconPath>UI/Abilities/BloodFrenzy</iconPath>
		<cooldownTicksRange>3600</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<hostile>false</hostile>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>0</range>
			<warmupTime>0.5</warmupTime>
			<targetParams>
				<canTargetSelf>true</canTargetSelf>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- 80% - 弃誓者转化（临时） -->
	<AbilityDef>
		<defName>Sideria_OathbreakerTransformation</defName>
		<label>embrace the curse</label>
		<description>Fully embrace the vampiric curse for a short time, becoming an unstoppable killing machine.\n\nRequires: Blood Curse ≥ 80%\nCost: 60% Blood Essence\nDuration: 30 seconds\nCooldown: 180 seconds\nEffect: +80% damage, +50% attack speed, +40% move speed, drain blood essence from all damage dealt</description>
		<iconPath>UI/Abilities/OathbreakerTransformation</iconPath>
		<cooldownTicksRange>10800</cooldownTicksRange>
		<aiCanUse>true</aiCanUse>
		<displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
		<disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
		<hostile>false</hostile>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<range>0</range>
			<warmupTime>1.0</warmupTime>
			<targetParams>
				<canTargetSelf>true</canTargetSelf>
			</targetParams>
		</verbProperties>
	</AbilityDef>

	<!-- ========================================
		 技能效果Hediff
	========================================= -->

	<!-- 龙之光环Buff -->
	<HediffDef>
		<defName>Sideria_DragonicAura_Effect</defName>
		<label>draconic aura</label>
		<description>Inspired by Sideria's noble presence.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(0.9, 0.7, 0.2)</defaultLabelColor>
		<isBad>false</isBad>
		<stages>
			<li>
				<capMods>
					<li>
						<capacity>Moving</capacity>
						<offset>0.15</offset>
					</li>
				</capMods>
				<statOffsets>
					<MeleeHitChance>20</MeleeHitChance>
					<ShootingAccuracyPawn>0.2</ShootingAccuracyPawn>
				</statOffsets>
			</li>
		</stages>
	</HediffDef>

	<!-- 龙化Buff -->
	<HediffDef>
		<defName>Sideria_DragonicTransformation_Effect</defName>
		<label>dragon form</label>
		<description>Sideria has assumed a partial dragon form.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(1.0, 0.6, 0.0)</defaultLabelColor>
		<isBad>false</isBad>
		<stages>
			<li>
				<capMods>
					<li>
						<capacity>Moving</capacity>
						<offset>0.4</offset>
					</li>
				</capMods>
				<statOffsets>
					<MeleeDPS>1.5</MeleeDPS>
					<ArmorRating_Sharp>0.3</ArmorRating_Sharp>
					<ArmorRating_Blunt>0.3</ArmorRating_Blunt>
				</statOffsets>
				<statFactors>
					<IncomingDamageFactor>0.6</IncomingDamageFactor>
				</statFactors>
			</li>
		</stages>
	</HediffDef>

	<!-- 血族拥抱诅咒 -->
	<HediffDef>
		<defName>Sideria_VampiricEmbrace_Curse</defName>
		<label>vampiric curse</label>
		<description>Life force is being drained away.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(0.7, 0.0, 0.0)</defaultLabelColor>
		<isBad>true</isBad>
		<comps>
			<li Class="HediffCompProperties_Disappears">
				<disappearsAfterTicks>600</disappearsAfterTicks>
			</li>
		</comps>
	</HediffDef>

	<!-- 血之狂怒Buff -->
	<HediffDef>
		<defName>Sideria_BloodFrenzy_Effect</defName>
		<label>blood frenzy</label>
		<description>In a berserker rage, attacking with reckless speed.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(0.9, 0.0, 0.0)</defaultLabelColor>
		<isBad>false</isBad>
		<stages>
			<li>
				<capMods>
					<li>
						<capacity>Moving</capacity>
						<offset>0.3</offset>
					</li>
				</capMods>
				<statOffsets>
					<MeleeDPS>1.0</MeleeDPS>
					<MeleeHitChance>-20</MeleeHitChance>
				</statOffsets>
				<statFactors>
					<MeleeWeapon_CooldownMultiplier>0.5</MeleeWeapon_CooldownMultiplier>
				</statFactors>
			</li>
		</stages>
	</HediffDef>

	<!-- 弃誓者转化Buff -->
	<HediffDef>
		<defName>Sideria_OathbreakerTransformation_Effect</defName>
		<label>oathbreaker form</label>
		<description>Fully embracing the vampiric curse.</description>
		<hediffClass>HediffWithComps</hediffClass>
		<defaultLabelColor>(0.5, 0.0, 0.0)</defaultLabelColor>
		<isBad>false</isBad>
		<stages>
			<li>
				<capMods>
					<li>
						<capacity>Moving</capacity>
						<offset>0.4</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.2</offset>
					</li>
				</capMods>
				<statOffsets>
					<MeleeDPS>2.0</MeleeDPS>
				</statOffsets>
				<statFactors>
					<MeleeWeapon_CooldownMultiplier>0.5</MeleeWeapon_CooldownMultiplier>
				</statFactors>
			</li>
		</stages>
	</HediffDef>

</Defs>
